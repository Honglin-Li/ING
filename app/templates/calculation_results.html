<head>
  <title>Bootstrap Card</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://d3js.org/d3.v4.js"></script>
  <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
</head>

{% extends "base.html" %}
{% block title %} Calculation Results and Visualisation {% endblock %}

{% block page_content %}
<h1>Finance distribution between you and your partner</h1>
<p>some bla bla here</p>


<style>
  .image-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .image-container img {
    margin-right: 40px; /* Adjust the margin as per your preference */
  }
</style>
<div class="image-container" href="#">
  <figure>
    <img src="{{url_for('static', filename='images/man.png')}}" width="150" height="150">
    <figcaption>Lars</figcaption>
  </figure>
  <figure>
    <img src="{{url_for('static', filename='images/woman.png')}}" width="150" height="150">
    <figcaption>Monika</figcaption>
  </figure>
</div>


<div id="my_dataviz"></div>

<script>
  // set the dimensions and margins of the graph
  var width = 550
      height = 450
      margin = 40
  
  // The radius of the pieplot is half the width or half the height (smallest one). I subtract a bit of margin.
  var radius = Math.min(width, height) / 2 - margin
  
  // append the svg object to the div called 'my_dataviz'
  var svg1 = d3.select("#my_dataviz")
    .append("svg")
      .attr("width", width)
      .attr("height", height)
      .append("g")
      .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

  var svg2 = d3.select("#my_dataviz")
    .append("svg")
      .attr("width", width)
      .attr("height", height)
    .append("g")
      .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

  // Create dummy data
  var data1 = {a: 10, b: 20, c:10, d:10}
  var data2 = {a: 10, b: 10, c:30, d:10}

  // set the color scale
  var color1 = d3.scaleOrdinal()
    .domain(data1)
    .range(d3.schemeSet2);

  var color2 = d3.scaleOrdinal()
  .domain(data2)
  .range(d3.schemeSet2);
  // Compute the position of each group on the pie:
  var pie = d3.pie()
    .value(function(d) {return d.value; })

  var data1_ready = pie(d3.entries(data1))
  var data2_ready = pie(d3.entries(data2))


  // shape helper to build arcs:
  var arcGenerator = d3.arc()
    .innerRadius(0)
    .outerRadius(radius)
  
  // Build the pie chart: Basically, each part of the pie is a path that we build using the arc function.
  var path1 = svg1
  .selectAll('mySlices')
  .data(data1_ready)
  .enter()
  .append('path')
    .attr('d', arcGenerator)
    .attr('fill', function(d){ return(color1(d.data.key)) })
    .attr("stroke", "black")
    .style("stroke-width", "2px")
    .style("opacity", 0.5)
  // Now add the annotation. Use the centroid method to get the best coordinates
  svg1
    .selectAll('mySlices')
    .data(data1_ready)
    .enter()
    .append('text')
    .text(function(d){ return "grp " + d.data.key})
    .attr("transform", function(d) { return "translate(" + arcGenerator.centroid(d) + ")";  })
    .style("text-anchor", "middle")
    .style("font-size", 17)

    var path2 = svg2
    .selectAll('mySlices')
    .data(data2_ready)
    .enter()
    .append('path')
      .attr('d', arcGenerator)
      .attr('fill', function(d){ return(color2(d.data.key)) })
      .attr("stroke", "black")
      .style("stroke-width", "2px")
      .style("opacity", 0.5)
// Now add the annotation. Use the centroid method to get the best coordinates
  svg2
    .selectAll('mySlices')
    .data(data2_ready)
    .enter()
    .append('text')
    .text(function(d){ return "grp " + d.data.key})
    .attr("transform", function(d) { return "translate(" + arcGenerator.centroid(d) + ")";  })
    .style("text-anchor", "middle")
    .style("font-size", 17)  
  
  </script>


{% endblock %}
